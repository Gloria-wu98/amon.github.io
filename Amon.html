{\rtf1\ansi\ansicpg950\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;\f1\fnil\fcharset136 PingFangTC-Regular;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;\red255\green255\blue255;}
{\*\expandedcolortbl;;\cssrgb\c0\c0\c0;\cssrgb\c100000\c100000\c100000\c0;}
\paperw11900\paperh16840\margl1440\margr1440\vieww12720\viewh7240\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs28 \cf2 \cb3 \expnd0\expndtw0\kerning0
<!DOCTYPE html>\
<html lang="zh-Hant">\
<head>\
    <meta charset="UTF-8">\
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\
    <title>
\f1 \'ce\'47\'b0\'d5
\f0 A
\f1 \'b9\'da\'af\'ab\'a9\'5f\'b9\'44\'a8\'e3\'ae\'fc\'b3\'f8\'b2\'a3\'a5\'cd\'be\'b9
\f0 </title>\
    <!-- 
\f1 \'a4\'de\'a4\'4a
\f0  Tailwind CSS -->\
    <script src="https://cdn.tailwindcss.com"></script>\
    <!-- 
\f1 \'a4\'de\'a4\'4a
\f0  React 
\f1 \'a9\'4d
\f0  Babel for JSX -->\
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>\
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>\
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>\
    <style>\
        /* 
\f1 \'a6\'db\'ad\'71\'a6\'72\'c5\'e9\'bb\'50\'b0\'ca\'b5\'65
\f0  */\
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');\
        body \{\
            font-family: 'Noto Sans TC', sans-serif;\
        \}\
        /* 
\f1 \'ab\'f6\'b6\'73\'aa\'ba\'c4\'61\'b0\'b1\'ae\'c4\'aa\'47
\f0  */\
        .btn-hover-effect:hover \{\
            box-shadow: 0 0 20px #fde047, 0 0 30px #ef4444;\
        \}\
    </style>\
</head>\
<body class="bg-blue-50">\
\
    <div id="root"></div>\
\
    <script type="text/babel">\
        // 
\f1 \'a5\'44\'c0\'b3\'a5\'ce\'b5\'7b\'a6\'a1\'b2\'d5\'a5\'f3
\f0 \
        function App() \{\
            const [prompt, setPrompt] = React.useState('');\
            const [loading, setLoading] = React.useState(false);\
            const [imageUrl, setImageUrl] = React.useState('');\
            const [optimizedPrompt, setOptimizedPrompt] = React.useState('');\
            const [error, setError] = React.useState('');\
\
            // 
\f1 \'b3\'42\'b2\'7a\'b9\'cf\'a4\'f9\'a5\'cd\'a6\'a8\'b9\'4c\'b5\'7b\'aa\'ba\'a8\'e7\'bc\'c6
\f0 \
            const handleGenerate = async () => \{\
                if (!prompt) \{\
                    setError('
\f1 \'bd\'d0\'a5\'fd\'bf\'e9\'a4\'4a\'a7\'41\'aa\'ba\'b9\'da\'b7\'51\'b9\'44\'a8\'e3\'a9\'4d\'b3\'f5\'b4\'ba\'a1\'49
\f0 ');\
                    return;\
                \}\
                setError('');\
                setLoading(true);\
                setImageUrl('');\
                setOptimizedPrompt('');\
\
                try \{\
                    // 
\f1 \'a8\'42\'c6\'4a\'a4\'40\'a1\'47\'b1\'4e\'a8\'cf\'a5\'ce\'aa\'cc\'b4\'a3\'a5\'dc\'c0\'75\'a4\'c6\'ac\'b0\'b8\'d4\'b2\'d3\'aa\'ba\'ad\'5e\'a4\'e5\'b4\'a3\'a5\'dc\'b5\'fc\'a1\'41\'a5\'48\'b2\'c5\'a6\'58\'a1\'75\'ce\'47\'b0\'d5
\f0 A
\f1 \'b9\'da\'a1\'76\'aa\'ba\'ad\'b7\'ae\'e6
\f0 \
                    const optimizationPrompt = `\
                        Please translate and expand the following user request into a detailed, high-quality English prompt for an image generation model.\
                        The goal is to create a movie poster that perfectly captures the fun, simple, and iconic style of a "Doraemon" (Fujiko F. Fujio) anime.\
                        The prompt must be very descriptive, including details about:\
                        1.  **Characters & Emotion:** Describe the characters like "Doraemon, the blue robotic cat," "Nobita Nobi, the clumsy but kind boy in a yellow shirt," "Shizuka Minamoto, the sweet girl in a pink dress," "Takeshi 'Gian' Goda, the big bully," or "Suneo Honekawa, the fox-faced rich kid." Detail their classic, simple expressions: joy, panic, surprise, or mischief.\
                        2.  **Gadget (
\f1 \'b9\'44\'a8\'e3
\f0 ):** The prompt must feature a central futuristic gadget from Doraemon's pocket. It should be described clearly (e.g., "the Anywhere Door, a pink wooden door," "the Bamboo Copter, a small propeller worn on the head," "the Time Machine").\
                        3.  **Background & Atmosphere:** The setting is often simple and iconic. Describe locations like "Nobita's messy bedroom," "the neighborhood's vacant lot with three giant concrete pipes," or a fantastical location visited with a gadget. The atmosphere should feel light-hearted, comedic, and full of adventure.\
                        4.  **Art Style:** This is crucial. Specify "classic Doraemon anime style," "Fujiko F. Fujio's art style," "simple, clean, bold outlines," "flat and bright color palette (Doraemon blue, Nobita yellow, Shizuka pink, bright reds)," "rounded character designs," and "a fun, optimistic, and slightly goofy feeling." The art must NOT be painterly, realistic, or overly detailed. It should look like a frame from the 1979 or 2005 anime series.\
                        5.  **Composition:** A clear, dynamic composition, like a manga panel. It should focus on the characters reacting to the gadget's effect.\
\
                        User Request: "$\{prompt\}"\
\
                        Return ONLY the final, optimized English prompt, ready for the image model. Do not include any other text or explanation.\
                    `;\
\
                    let chatHistory = [\{ role: "user", parts: [\{ text: optimizationPrompt \}] \}];\
                    const payloadForOptimization = \{ contents: chatHistory \};\
                    const apiKey = ""; \
                    const apiUrlForOptimization = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=$\{apiKey\}`;\
\
                    const optimizationResponse = await fetch(apiUrlForOptimization, \{\
                        method: 'POST',\
                        headers: \{ 'Content-Type': 'application/json' \},\
                        body: JSON.stringify(payloadForOptimization)\
                    \});\
\
                    if (!optimizationResponse.ok) \{\
                        const errorBody = await optimizationResponse.text();\
                        console.error("Optimization API Error:", errorBody);\
                        throw new Error(`
\f1 \'c0\'75\'a4\'c6\'b4\'a3\'a5\'dc\'b5\'fc\'ae\'c9\'b5\'6f\'a5\'cd\'bf\'f9\'bb\'7e\'a1\'43
\f0 API 
\f1 \'a6\'5e\'c0\'b3
\f0 : $\{errorBody\}`);\
                    \}\
\
                    const optimizationResult = await optimizationResponse.json();\
                    const generatedOptimizedPrompt = optimizationResult.candidates[0]?.content?.parts[0]?.text.trim();\
                    \
                    if (!generatedOptimizedPrompt) \{\
                       throw new Error('
\f1 \'b5\'4c\'aa\'6b\'b1\'71
\f0  AI 
\f1 \'c0\'f2\'a8\'fa\'c0\'75\'a4\'c6\'ab\'e1\'aa\'ba\'b4\'a3\'a5\'dc\'b5\'fc\'a1\'43
\f0 ');\
                    \}\
                    setOptimizedPrompt(generatedOptimizedPrompt);\
\
                    // 
\f1 \'a8\'42\'c6\'4a\'a4\'47\'a1\'47\'a8\'cf\'a5\'ce\'c0\'75\'a4\'c6\'ab\'e1\'aa\'ba\'b4\'a3\'a5\'dc\'b5\'fc\'a5\'cd\'a6\'a8\'b9\'cf\'a4\'f9
\f0 \
                    const payloadForImage = \{\
                        instances: [\{ prompt: generatedOptimizedPrompt \}],\
                        parameters: \{ sampleCount: 1, aspectRatio: "4:3" \} // Changed to a more classic anime/TV aspect ratio\
                    \};\
                    const apiUrlForImage = `https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=$\{apiKey\}`;\
\
                    const imageResponse = await fetch(apiUrlForImage, \{\
                        method: 'POST',\
                        headers: \{ 'Content-Type': 'application/json' \},\
                        body: JSON.stringify(payloadForImage)\
                    \});\
\
                    if (!imageResponse.ok) \{\
                        const errorBody = await imageResponse.text();\
                        console.error("Image Generation API Error:", errorBody);\
                        throw new Error(`
\f1 \'a5\'cd\'a6\'a8\'ae\'fc\'b3\'f8\'ae\'c9\'b5\'6f\'a5\'cd\'bf\'f9\'bb\'7e\'a1\'43
\f0 API 
\f1 \'a6\'5e\'c0\'b3
\f0 : $\{errorBody\}`);\
                    \}\
\
                    const imageResult = await imageResponse.json();\
                    const b64Json = imageResult.predictions?.[0]?.bytesBase64Encoded;\
\
                    if (b64Json) \{\
                        const generatedImageUrl = `data:image/png;base64,$\{b64Json\}`;\
                        setImageUrl(generatedImageUrl);\
                    \} else \{\
                        throw new Error('
\f1 \'ae\'fc\'b3\'f8\'a5\'cd\'a6\'a8\'a5\'a2\'b1\'d1\'a1\'41\'a5\'bc\'a6\'ac\'a8\'ec\'a6\'b3\'ae\'c4\'aa\'ba\'b9\'cf\'a4\'f9\'b8\'ea\'ae\'c6\'a1\'43
\f0 ');\
                    \}\
\
                \} catch (err) \{\
                    setError(err.message || '
\f1 \'b5\'6f\'a5\'cd\'a5\'bc\'aa\'be\'bf\'f9\'bb\'7e\'a1\'41\'bd\'d0\'b5\'79\'ab\'e1\'a6\'41\'b8\'d5\'a1\'43
\f0 ');\
                    console.error(err);\
                \} finally \{\
                    setLoading(false);\
                \}\
            \};\
\
            return (\
                <div className="bg-blue-50 text-slate-800 min-h-screen flex flex-col items-center p-4">\
                    <div className="w-full max-w-2xl mx-auto">\
                        <header className="text-center my-8">\
                            <h1 className="text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-red-500">\
                                
\f1 \'ce\'47\'b0\'d5
\f0 A
\f1 \'b9\'da\'af\'ab\'a9\'5f\'b9\'44\'a8\'e3\'b2\'a3\'a5\'cd\'be\'b9
\f0 \
                            </h1>\
                            <p className="text-slate-500 mt-4">\
                                
\f1 \'bf\'e9\'a4\'4a\'a7\'41\'b7\'51\'ad\'6e\'aa\'ba\'b9\'44\'a8\'e3\'a9\'4d\'b3\'f5\'b4\'ba\'a1\'41\'c5\'fd\'ce\'47\'b0\'d5
\f0 A
\f1 \'b9\'da\'c0\'b0\'a7\'41\'b9\'ea\'b2\'7b\'c4\'40\'b1\'e6\'a1\'49
\f0 \
                            </p>\
                        </header>\
\
                        <main className="flex flex-col items-center gap-6 w-full px-4">\
                            <div className="w-full">\
                                <textarea\
                                    value=\{prompt\}\
                                    onChange=\{(e) => setPrompt(e.target.value)\}\
                                    placeholder="
\f1 \'a8\'d2\'a6\'70\'a1\'47\'a4\'6a\'b6\'af\'b8\'f2\'ce\'47\'b0\'d5
\f0 A
\f1 \'b9\'da\'a5\'ce\'a5\'f4\'b7\'4e\'aa\'f9\'a8\'ec\'a5\'d5\'b0\'ee\'ac\'f6\'a9\'4d\'ae\'a3\'c0\'73\'b3\'a5\'c0\'5c
\f0 "\
                                    className="w-full h-28 p-4 bg-white border-2 border-slate-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"\
                                />\
                            </div>\
\
                            <button\
                                onClick=\{handleGenerate\}\
                                disabled=\{loading\}\
                                className="w-full md:w-auto px-8 py-4 bg-blue-500 text-white font-bold rounded-full shadow-lg hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100 transition-all duration-300 relative border-4 border-white btn-hover-effect"\
                            >\
                                <div className="absolute -top-3 -left-3 w-10 h-10 bg-red-500 rounded-full border-4 border-white"></div>\
                                <div className="absolute -bottom-4 w-12 h-12 bg-yellow-300 rounded-full border-4 border-white flex items-center justify-center">\
                                    <div className="w-3 h-3 bg-gray-600 rounded-full"></div>\
                                </div>\
                                \{loading ? '
\f1 \'b9\'44\'a8\'e3\'a5\'bf\'a6\'62\'ae\'b3\'a5\'58
\f0 ...' : '
\f1 \'ae\'b3\'a5\'58\'b9\'44\'a8\'e3\'a7\'61\'a1\'49
\f0 '\}\
                            </button>\
\
                            \{error && <p className="text-red-500 mt-4 text-center font-semibold">\{error\}</p>\}\
\
                            <div className="w-full mt-8 flex flex-col items-center gap-8">\
                                \{loading && (\
                                    <div className="flex flex-col items-center justify-center gap-4">\
                                        <div className="relative">\
                                            <img src="https://placehold.co/80x80/3b82f6/ffffff?text=D" className="rounded-full animate-bounce" alt="Loading Icon"/>\
                                            <div className="absolute bottom-2 left-1/2 -translate-x-1/2 w-8 h-4 bg-yellow-400 rounded-t-full"></div>\
                                        </div>\
                                        <p className="text-slate-500">
\f1 \'ce\'47\'b0\'d5
\f0 A
\f1 \'b9\'da\'a5\'bf\'a6\'62\'a6\'ca\'c4\'5f\'b3\'55\'b8\'cc\'b4\'4d\'a7\'e4\'b9\'44\'a8\'e3
\f0 ...</p>\
                                    </div>\
                                )\}\
                                \
                                \{imageUrl && !loading && (\
                                    <div className="w-full max-w-md bg-white rounded-lg shadow-2xl p-4 border-2 border-blue-200">\
                                        <img\
                                            src=\{imageUrl\}\
                                            alt="Generated Doraemon-Inspired Anime Poster"\
                                            className="w-full rounded-md object-contain border-4 border-yellow-300"\
                                        />\
                                        <div className="mt-4">\
                                            <h3 className="text-lg font-bold text-blue-600">
\f1 \'c0\'75\'a4\'c6\'ab\'e1\'aa\'ba\'ad\'5e\'a4\'e5\'b4\'a3\'a5\'dc\'b5\'fc\'a1\'47
\f0 </h3>\
                                            <p className="text-slate-600 bg-blue-100 p-3 rounded-md mt-2 text-sm break-words">\
                                                \{optimizedPrompt\}\
                                            </p>\
                                        </div>\
                                    </div>\
                                )\}\
                            </div>\
                        </main>\
                    </div>\
                </div>\
            );\
        \}\
\
        // 
\f1 \'b1\'4e
\f0  App 
\f1 \'b2\'d5\'a5\'f3\'b4\'e8\'ac\'56\'a8\'ec
\f0  #root 
\f1 \'a4\'b8\'af\'c0\'a4\'a4
\f0 \
        const container = document.getElementById('root');\
        const root = ReactDOM.createRoot(container);\
        root.render(<App />);\
    </script>\
\
</body>\
</html>\
\
}